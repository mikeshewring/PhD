library(raster)
library(rasterVis)
library(sf)
library(rgdal)
library(dplyr)
library(tidyr)
library(ggplot2)
bears<-read.csv('Brown bear Slovenia 1993-1999.csv')%>%sf::st_as_sf(coords = c("utm.easting", "utm.northing"),crs = 32633) # create an sf object containing bear data
head(bears)
map<- sf::st_as_sf(raster::getData(name = "GADM", country = 'SVN', level = 0))%>%st_transform(map, crs=32633)%>%st_simplify(map)# change to same CRS
map<- sf::st_as_sf(raster::getData(name = "GADM", country = 'SVN', level = 0))%>%st_transform(crs=32633)%>%st_simplify()# change to same CRS
map2<- sf::st_as_sf(raster::getData(name = "GADM", country = 'HRV', level = 0))%>%st_transform(crs=32633)%>%st_simplify()# change to same CRS
map1<-rbind(map,map2)
map<-st_buffer(map, 40000)
map<-st_crop(map1,map)
rm(map1,map2)
(bear.map<-ggplot()
+geom_sf(data=map)
+geom_sf(data=roads)
+geom_sf(data=bears, aes(colour=individual.local.identifier))
+xlab("UTM Easting")
+ylab("UTM Northing")
+ggtitle("Bear Re-Loc map")
+theme(panel.background = element_rect(fill = "aliceblue")))
roads<-st_read('roads.shp')%>%filter(type == "motorway"| type=="primary")%>%st_transform(roads, crs=32633)
roads
(bear.map<-ggplot()
+geom_sf(data=map)
+geom_sf(data=roads)
+geom_sf(data=bears, aes(colour=individual.local.identifier))
+xlab("UTM Easting")
+ylab("UTM Northing")
+ggtitle("Bear Re-Loc map")
+theme(panel.background = element_rect(fill = "aliceblue")))
l=list.files("/landcover1990", pattern = ".tif", full.names = T)
l=list.files("\landcover1990", pattern = ".tif", full.names = T)
getwd()
l=list.files("C:/Users/C1751157/Documents/PhD/workshops/spatial/raster/raster/landcover1990", pattern = ".tif", full.names = T)
l
l=list.files("/raster/landcover1990", pattern = ".tif", full.names = T)
l=list.files("raster/landcover1990", pattern = ".tif", full.names = T)
l=list.files("landcover1990", pattern = ".tif", full.names = T)
l
hab<-raster(l[1])
plot(hab)
hab<-crop(hab, map, snap="in")
hab
`crs<-`(hab, '+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs')
hab<-projectRaster(hab, res=250, crs='+init=epsg:32633')
projectRaster
?projectRaster
hab
`crs<-`(hab, '+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs')
hab
crs<-(hab, '+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs')
crs(hab, '+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs')
?crs
crs(hab)<-'+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs'
hab<-projectRaster(hab, res=250, crs='+init=epsg:32633', method="ngb")
foo<-st_transform(map, crs = 3035)
hab<-crop(hab, foo, snap="in")
hab<-raster(l[1]) #if there were multiple raster files in this folder with the same extent and resolution (i.e. a time series of climate data) we could directly load them in with the stack command on the list object.
crs(hab)<-'+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs'
hab<-crop(hab, foo, snap="in")
hab<-mask(hab, foo)
plot(hab)
hab<-projectRaster(hab, res=250, crs='+init=epsg:32633', method="ngb")
hab
plot(hab)
plot(bears$geometry
add=T)
plot(bears$geometry,
add=T)
library(adehabitat)
library(adehabitatHR)
library(adehabitatHS)
habuse<-extract(hab, bears,df=T, fun=mean, na.rm=T, sp=T)%>%st_as_sf(df)
habuse<-raster::extract(hab, bears,df=T, fun=mean, na.rm=T, sp=T)%>%st_as_sf(df)
head(habuse)
?extract
boxplot(habuse$g250_clc90_V18_5)
habuse$g250_clc90_V18_5<-as.factor(habuse$g250_clc90_V18_5)
boxplot(habuse$g250_clc90_V18_5)
boxplot(habuse$g250_clc90_V18_5)
plot(habuse$g250_clc90_V18_5)
bears5km<-st_buffer(bears, 5000)
bears5km
habavail<-raster::extract(hab, bears5km, df=T, na.rm=T, sp=T)%>%st_as_sf(df)
foo<-as.factor(hab)
habuse<-raster::extract(foo, bears,df=T, na.rm=T, sp=T)%>%st_as_sf(df)
head(habuse)
plot(habuse$g250_clc90_V18_5) #23=broad-leaved forestry #24 = coniferous forestry #25= mixed forest
hist(habuse$g250_clc90_V18_5) #23=broad-leaved forestry #24 = coniferous forestry #25= mixed forest
habuse$g250_clc90_V18_5<-as.factor(habuse$g250_clc90_V18_5)
hist(habuse$g250_clc90_V18_5) #23=broad-leaved forestry #24 = coniferous forestry #25= mixed forest
plot(habuse$g250_clc90_V18_5) #23=broad-leaved forestry #24 = coniferous forestry #25= mixed forest
?extract
rm(bears5km)
